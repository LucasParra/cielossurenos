(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[12],{651:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));n(2);var c=n(646),r=n(649),o=n(17),i=function(e){var t=e.onPress,n=e.color,i=e.icon;return Object(o.jsx)("td",{className:"py-2",children:Object(o.jsx)(c.tb,{className:"align-items-center",children:Object(o.jsx)(c.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-2 mb-xl-0",children:Object(o.jsx)(c.f,{color:n,onClick:t,children:Object(o.jsx)(r.a,{content:i,size:"xl"})})})})})},s=function(e){var t=e.children,n=e.value,c=e.onChange,r=e.disabled,i=e.accept;return Object(o.jsxs)("label",{htmlFor:"contained-button-file",className:"m-0 w-100",children:[Object(o.jsx)("input",{value:n,accept:i,disabled:r,style:{display:"none"},id:"contained-button-file",multiple:!0,type:"file",onChange:r?function(){}:c}),t]})}},656:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var c=n(51),r=function(e){return c.supabase.from("Product").select("*").limit(5*e+1).then((function(e){return e.data})).catch(console.error)},o=function(e){return c.supabase.from("UserProduct").select("*,ProductID(*)").eq("UserID",e).then((function(e){return e.data})).catch(console.error)},i=function(e){return c.supabase.from("UserProduct").select("*",{count:"exact"}).eq("ProductID",e).then((function(e){return e.count}))}},658:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"f",(function(){return a})),n.d(t,"l",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"h",(function(){return b})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return j})),n.d(t,"m",(function(){return m})),n.d(t,"k",(function(){return h})),n.d(t,"j",(function(){return i})),n.d(t,"g",(function(){return O})),n.d(t,"b",(function(){return g}));var c=n(655),r=n.n(c),o=n(51).supabase,i=function(e){return o.from("ChargeType").select("*").limit(5*e+1).then((function(e){return e.data})).catch(console.error)},s=function(e){return o.from("Charge").insert(e).then((function(e){return e.data})).catch(console.error)},a=function(e){return o.from("Charge").delete().match({ID:e}).then((function(e){return e.data}))},u=function(e,t){return o.from("Charge").update(e).eq("ID",t).then((function(e){return e.data})).catch(console.error)},l=function(){return o.from("User").select("*").eq("RolID",2).then((function(e){e.data.map((function(e){return o.from("UserProduct").select("Product(*),ID,Price").eq("UserID",e.ID).then((function(t){var n=t.data;return 0===n.length?null:s({ChargeTypeID:7,CreatedAt:r()().toDate(),Charge:n.reduce((function(e,t){return e+t.Product.BasePrice}),0),ClientID:e.ID,State:!1,Remaining:0})}))}))})).catch(console.error)},d=function(e){return o.from("Charge").select("*,ChargeTypeID(*)").eq("ClientID",e).eq("State",!1).then((function(e){return e.data}))},b=function(e){return o.from("Charge").select("*,ChargeTypeID(*)").eq("ClientID",e).order("CreatedAt",{ascending:!0}).then((function(e){return e.data}))},f=function(e,t,n){return o.from("Charge").update({State:!0,UrlImage:t,DocumentID:n.id,UrlDocument:n.urlPublicView}).eq("ID",e).then((function(e){return e.data}))},j=function(e){return o.from("ChargeType").insert(e).then((function(e){return e.data})).catch(console.error)},h=function(){return o.from("ChargeType").select("*").then((function(e){return e.data})).catch(console.error)},m=function(e,t){return o.from("ChargeType").update(t).eq("ID",e)},O=function(e){return o.from("ChargeType").delete().match({ID:e}).then((function(e){return e.data}))},g=function(e){return o.from("Charge").select("*",{count:"exact"}).eq("ChargeTypeID",e).then((function(e){return e.count}))}},662:function(e,t,n){"use strict";var c=n(174),r=n(23),o=n(91),i=n(2),s=n(646),a=n(649),u=n(656),l=n(17);t.a=function(e){var t=e.type,n=e.productsSelected,d=e.setProductsSelected,b=Object(i.useState)([]),f=Object(o.a)(b,2),j=f[0],h=f[1],m=Object(i.useState)(!1),O=Object(o.a)(m,2),g=O[0],x=O[1],C=["Nombre","Precio","activo","select"===t&&"personalizar_precio"],p=function(e){x(!0),Object(u.c)(e).then((function(e){h(e.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{Nombre:e.Name,Precio:new Intl.NumberFormat("es-CL",{currency:"CLP",style:"currency"}).format(e.BasePrice)})}))),x(!1)}))};return Object(i.useEffect)(p,[]),Object(l.jsx)(s.y,{items:j,fields:C,itemsPerPage:5,onPageChange:p,loading:g,pagination:!0,scopedSlots:{personalizar_precio:function(e){return"select"===t&&Object(l.jsx)("td",{className:"py-2",children:Object(l.jsx)(s.u,{col:"4",xs:"4",sm:"4",md:"4",className:"mb-2 mb-xl-0",children:Object(l.jsx)(s.P,{placeholder:"10.000",defaultValue:e.BasePrice,onChange:function(t){var c=t.target.value;return d(n.map((function(t){return t.ProductID===e.ID?Object(r.a)(Object(r.a)({},t),{},{Price:parseInt(c)}):Object(r.a)({},t)})))}})})})},activo:function(e){return Object(l.jsx)("td",{className:"py-2",children:"select"===t?Object(l.jsx)(s.tb,{className:"align-items-center",children:Object(l.jsx)(s.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-2 mb-xl-0",children:Object(l.jsx)(s.Cb,{className:"mx-1",variant:"3d",color:"success",value:1===n.filter((function(t){return e.ID===t.ProductID})).length,checked:1===n.filter((function(t){return e.ID===t.ProductID})).length,onChange:function(t){var r=t.target.checked;d(r?[].concat(Object(c.a)(n),[{UserID:"",ProductID:e.ID,Price:e.BasePrice,label:e.Nombre}]):n.filter((function(t){return e.ID!==t.ProductID})))}})})},e.ID):Object(l.jsxs)(s.tb,{className:"align-items-center",children:[Object(l.jsx)(s.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-2 mb-xl-0",children:Object(l.jsx)(s.f,{color:"primary",onClick:function(){},children:Object(l.jsx)(a.a,{name:"cil-pencil",style:{paddingLeft:10},customClasses:"c-sidebar-nav-icon"})})}),Object(l.jsx)(s.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-2 mb-xl-0",children:Object(l.jsx)(s.f,{color:"danger",onClick:function(){},children:Object(l.jsx)(a.a,{name:"cil-trash",style:{paddingLeft:10},customClasses:"c-sidebar-nav-icon"})})})]})})}}})}},664:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return l}));var c=n(646),r=n(2),o=n(662),i=n(17),s=function(e){var t=e.show,n=e.setShow,r=e.onFinish,s=e.productsSelected,a=e.setProductsSelected;return Object(i.jsxs)(c.db,{show:t,onClose:n,size:"lg",children:[Object(i.jsx)(c.gb,{closeButton:!0,children:Object(i.jsx)(c.hb,{children:"Selecciona los productos que quieres asignar a este usuario"})}),Object(i.jsx)(c.eb,{children:Object(i.jsx)(o.a,{type:"select",productsSelected:s,setProductsSelected:a})}),Object(i.jsx)(c.fb,{children:Object(i.jsx)(c.f,{color:"success",onClick:r,children:"Aceptar"})})]})},a=function(e){var t=e.show,n=e.setShow,r=e.onFinish;return Object(i.jsxs)(c.db,{show:t,color:"danger",onClose:function(){return n(!1)},size:"sm",children:[Object(i.jsx)(c.gb,{children:Object(i.jsx)(c.hb,{style:{fontWeight:"bold",width:"100%",textAlign:"center"},children:"Estas seguro?"})}),Object(i.jsx)(c.fb,{children:Object(i.jsxs)(c.tb,{style:{width:"100%"},children:[Object(i.jsx)(c.u,{col:"6",children:Object(i.jsx)(c.f,{color:"danger",onClick:r,style:{fontWeight:"bold",width:"100%"},children:"Si"})}),Object(i.jsx)(c.u,{col:"6",children:Object(i.jsx)(c.f,{onClick:function(){return n(!1)},color:"secondary",style:{fontWeight:"bold",width:"100%"},children:"No"})})]})})]})},u=n(91),l=function(e){var t=e.onFinish,n=e.show,o=e.setShow,s=e.nameEdit,a=Object(r.useState)(s||""),l=Object(u.a)(a,2),d=l[0],b=l[1],f=Object(r.useState)(!1),j=Object(u.a)(f,2),h=j[0],m=j[1];return Object(r.useEffect)((function(){return b(s||"")}),[s]),Object(i.jsx)(c.db,{show:n,onClose:o,size:"sm",children:Object(i.jsxs)(c.J,{className:h?"was-validated":"",children:[Object(i.jsx)(c.gb,{children:Object(i.jsxs)(c.hb,{style:{fontWeight:"bold",width:"100%",textAlign:"center"},children:["".concat(s?"Editar":"Crear"," ")," Cargo"]})}),Object(i.jsxs)(c.eb,{children:[Object(i.jsx)(c.Z,{htmlFor:"name",style:{fontWeight:"bold"},children:"Nombre"}),Object(i.jsx)(c.P,{id:"name",name:"name",value:d,required:!0,onChange:function(e){var t=e.target.value;return b(t)}})]}),Object(i.jsx)(c.fb,{children:Object(i.jsxs)(c.tb,{style:{width:"100%"},children:[Object(i.jsx)(c.u,{col:"6",children:Object(i.jsx)(c.f,{color:"success",onClick:function(){if(""===d)return m(!0);t(d),m(!1)},style:{fontWeight:"bold",width:"100%"},children:"".concat(s?"Editar":"Crear")})}),Object(i.jsx)(c.u,{col:"6",children:Object(i.jsx)(c.f,{onClick:function(){return o(!1)},color:"secondary",style:{fontWeight:"bold",width:"100%"},children:"Cancelar"})})]})})]})})}},666:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r}));var c=["#FF6633","#FFB399","#FF33FF","#FFFF99","#00B3E6","#E6B333","#3366E6","#999966","#99FF99","#B34D4D","#80B300","#809900","#E6B3B3","#6680B3","#66991A","#FF99E6","#CCFF1A","#FF1A66","#E6331A","#33FFCC","#66994D","#B366CC","#4D8000","#B33300","#CC80CC","#66664D","#991AFF","#E666FF","#4DB3FF","#1AB399","#E666B3","#33991A","#CC9999","#B3B31A","#00E680","#4D8066","#809980","#E6FF80","#1AFF33","#999933","#FF3380","#CCCC00","#66E64D","#4D80CC","#9900B3","#E64D66","#4DB380","#FF4D4D","#99E6E6","#6666FF"],r=function(e){switch(e){case 1:return"activo";case 2:return"de baja";case 3:return"moroso";case 4:return"en aprobacion";case 5:return"desconexion en proceso";case 6:return"activacion en proceso";default:return"indefinido"}}},672:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return h}));var c=n(763),r=n(646),o=n(2),i=n(651),s=n(17),a=["ID","nombre","editar","eliminar"],u=function(e){var t=e.charges,n=e.onPageChange,o=e.loading,u=e.onPressEdit,l=e.onPressDeleted;return Object(s.jsx)(r.y,{items:t,fields:a,itemsPerPage:5,onPageChange:n,loading:o,pagination:!0,scopedSlots:{editar:function(e){return Object(s.jsx)(i.a,{color:"info",icon:c.a.cilPencil,onPress:function(){u(e)}})},eliminar:function(e){return Object(s.jsx)(i.a,{color:"danger",icon:c.a.cilTrash,onPress:function(){l(e)}})}}})},l=n(23),d=n(91),b=n(660),f=function(e){var t=e.setOffice,n=e.office,c=Object(o.useState)([]),i=Object(d.a)(c,2),a=i[0],u=i[1],f=Object(o.useState)(!1),j=Object(d.a)(f,2),h=j[0],m=j[1],O=function(){m(!0),Object(b.d)().then((function(e){u(e.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{nombre:e.Name})}))),m(!1)}))};return Object(o.useEffect)(O,[]),Object(s.jsx)(r.y,{items:a,fields:["ID","nombre","opciones"],itemsPerPage:5,onPageChange:O,loading:h,pagination:!0,scopedSlots:{opciones:function(e){return Object(s.jsx)("td",{className:"py-2",children:Object(s.jsx)(r.tb,{className:"align-items-center",children:Object(s.jsx)(r.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-2 mb-xl-0",children:Object(s.jsx)(r.Cb,{className:"mx-1",variant:"3d",color:"success",value:(null===n||void 0===n?void 0:n.ID)===e.ID,checked:(null===n||void 0===n?void 0:n.ID)===e.ID,onChange:function(){return t(e)}})})},e.ID)})}}})},j=["ID","nombre","editar","eliminar"],h=function(e){var t=e.offices,n=e.onPageChange,o=e.loading,a=e.onPressEdit,u=e.onPressDeleted;return Object(s.jsx)(r.y,{items:t,fields:j,itemsPerPage:5,onPageChange:n,loading:o,pagination:!0,scopedSlots:{editar:function(e){return Object(s.jsx)(i.a,{color:"info",icon:c.a.cilPencil,onPress:function(){a(e)}})},eliminar:function(e){return Object(s.jsx)(i.a,{color:"danger",icon:c.a.cilTrash,onPress:function(){u(e)}})}}})}},729:function(e,t,n){"use strict";n.r(t);var c=n(23),r=n(91),o=n(2),i=n(646),s=n(658),a=n(664),u=n(672),l=n(652),d=n(659),b=n(666),f=n(17);t.default=function(){var e=Object(l.a)(["colors"]).colors,t=Object(o.useState)(!1),n=Object(r.a)(t,2),j=n[0],h=n[1],m=Object(o.useState)(!1),O=Object(r.a)(m,2),g=O[0],x=O[1],C=Object(o.useState)(!1),p=Object(r.a)(C,2),D=p[0],P=p[1],v=Object(o.useState)({}),I=Object(r.a)(v,2),F=I[0],y=I[1],N=Object(o.useState)([]),S=Object(r.a)(N,2),w=S[0],E=S[1],B=Object(o.useState)([]),k=Object(r.a)(B,2),q=k[0],A=k[1],T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;h(!0),Object(s.j)(e).then((function(e){return Promise.all(e.map((function(e){var t=e.ID,n=e.Name;return Object(s.b)(t).then((function(e){return{count:e,charges:n}}))}))).then((function(t){A(e.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{nombre:e.Name})}))),h(!1),E(t)}))})).catch(console.error)},W=function(){T(),h(!1),P(!1),x(!1),y({})};return Object(o.useEffect)(T,[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(i.tb,{className:"align-items-center",style:{marginBottom:16},children:Object(f.jsx)(i.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-3 mb-xl-0",children:Object(f.jsx)(i.f,{onClick:function(){return P(!0)},style:{backgroundColor:e.primary,color:"#fff",fontWeight:"bold"},children:"Crear Cargo"})})}),Object(f.jsxs)(i.tb,{children:[Object(f.jsx)(i.u,{xs:"12",lg:"6",children:Object(f.jsxs)(i.j,{children:[Object(f.jsx)(i.n,{style:{backgroundColor:e.primary,color:"#fff",fontWeight:"bold"},children:"Cargos"}),Object(f.jsx)(i.k,{children:Object(f.jsx)(u.a,{charges:q,onPageChange:T,loading:j,onPressEdit:function(e){y(e),P(!0)},onPressDeleted:function(e){y(e),x(!0)}})})]})}),Object(f.jsx)(i.u,{xs:"12",lg:"6",children:Object(f.jsxs)(i.j,{children:[Object(f.jsx)(i.n,{style:{backgroundColor:e.primary,color:"#fff",fontWeight:"bold"},children:"Grafica de los cargos mas utilizados"}),w.length>0&&Object(f.jsx)(i.k,{children:Object(f.jsx)(d.b,{datasets:[{backgroundColor:b.a,data:w.map((function(e){return e.count}))}],labels:w.map((function(e){return e.charges})),options:{tooltips:{enabled:!0}}})})]})})]}),Object(f.jsx)(a.a,{show:D,setShow:function(){y({}),P(!1)},nameEdit:null===F||void 0===F?void 0:F.Name,onFinish:function(e){return(null===F||void 0===F?void 0:F.ID)?function(e){return Object(s.m)(F.ID,{Name:e}).then(W)}(e):(t=e,Object(s.e)({Name:t}).then(W));var t}}),Object(f.jsx)(a.b,{show:g,setShow:function(){y({}),x(!1)},onFinish:function(){return Object(s.g)(F.ID).then(W)}})]})}}}]);
//# sourceMappingURL=12.ac52bde9.chunk.js.map