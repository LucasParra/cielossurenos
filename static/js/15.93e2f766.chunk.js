(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[15],{651:function(e,t,c){"use strict";c.d(t,"a",(function(){return o})),c.d(t,"b",(function(){return i}));c(2);var n=c(646),r=c(649),s=c(17),o=function(e){var t=e.onPress,c=e.color,o=e.icon;return Object(s.jsx)("td",{className:"py-2",children:Object(s.jsx)(n.tb,{className:"align-items-center",children:Object(s.jsx)(n.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-2 mb-xl-0",children:Object(s.jsx)(n.f,{color:c,onClick:t,children:Object(s.jsx)(r.a,{content:o,size:"xl"})})})})})},i=function(e){var t=e.children,c=e.value,n=e.onChange,r=e.disabled,o=e.accept;return Object(s.jsxs)("label",{htmlFor:"contained-button-file",className:"m-0 w-100",children:[Object(s.jsx)("input",{value:c,accept:o,disabled:r,style:{display:"none"},id:"contained-button-file",multiple:!0,type:"file",onChange:r?function(){}:n}),t]})}},656:function(e,t,c){"use strict";c.d(t,"c",(function(){return r})),c.d(t,"b",(function(){return s})),c.d(t,"a",(function(){return o}));var n=c(51),r=function(e){return n.supabase.from("Product").select("*").limit(5*e+1).then((function(e){return e.data})).catch(console.error)},s=function(e){return n.supabase.from("UserProduct").select("*,ProductID(*)").eq("UserID",e).then((function(e){return e.data})).catch(console.error)},o=function(e){return n.supabase.from("UserProduct").select("*",{count:"exact"}).eq("ProductID",e).then((function(e){return e.count}))}},662:function(e,t,c){"use strict";var n=c(174),r=c(23),s=c(91),o=c(2),i=c(646),a=c(649),l=c(656),u=c(17);t.a=function(e){var t=e.type,c=e.productsSelected,d=e.setProductsSelected,b=Object(o.useState)([]),j=Object(s.a)(b,2),h=j[0],f=j[1],O=Object(o.useState)(!1),m=Object(s.a)(O,2),x=m[0],g=m[1],p=["Nombre","Precio","activo","select"===t&&"personalizar_precio"],C=function(e){g(!0),Object(l.c)(e).then((function(e){f(e.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{Nombre:e.Name,Precio:new Intl.NumberFormat("es-CL",{currency:"CLP",style:"currency"}).format(e.BasePrice)})}))),g(!1)}))};return Object(o.useEffect)(C,[]),Object(u.jsx)(i.y,{items:h,fields:p,itemsPerPage:5,onPageChange:C,loading:x,pagination:!0,scopedSlots:{personalizar_precio:function(e){return"select"===t&&Object(u.jsx)("td",{className:"py-2",children:Object(u.jsx)(i.u,{col:"4",xs:"4",sm:"4",md:"4",className:"mb-2 mb-xl-0",children:Object(u.jsx)(i.P,{placeholder:"10.000",defaultValue:e.BasePrice,onChange:function(t){var n=t.target.value;return d(c.map((function(t){return t.ProductID===e.ID?Object(r.a)(Object(r.a)({},t),{},{Price:parseInt(n)}):Object(r.a)({},t)})))}})})})},activo:function(e){return Object(u.jsx)("td",{className:"py-2",children:"select"===t?Object(u.jsx)(i.tb,{className:"align-items-center",children:Object(u.jsx)(i.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-2 mb-xl-0",children:Object(u.jsx)(i.Cb,{className:"mx-1",variant:"3d",color:"success",value:1===c.filter((function(t){return e.ID===t.ProductID})).length,checked:1===c.filter((function(t){return e.ID===t.ProductID})).length,onChange:function(t){var r=t.target.checked;d(r?[].concat(Object(n.a)(c),[{UserID:"",ProductID:e.ID,Price:e.BasePrice,label:e.Nombre}]):c.filter((function(t){return e.ID!==t.ProductID})))}})})},e.ID):Object(u.jsxs)(i.tb,{className:"align-items-center",children:[Object(u.jsx)(i.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-2 mb-xl-0",children:Object(u.jsx)(i.f,{color:"primary",onClick:function(){},children:Object(u.jsx)(a.a,{name:"cil-pencil",style:{paddingLeft:10},customClasses:"c-sidebar-nav-icon"})})}),Object(u.jsx)(i.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-2 mb-xl-0",children:Object(u.jsx)(i.f,{color:"danger",onClick:function(){},children:Object(u.jsx)(a.a,{name:"cil-trash",style:{paddingLeft:10},customClasses:"c-sidebar-nav-icon"})})})]})})}}})}},664:function(e,t,c){"use strict";c.d(t,"c",(function(){return i})),c.d(t,"b",(function(){return a})),c.d(t,"a",(function(){return u}));var n=c(646),r=c(2),s=c(662),o=c(17),i=function(e){var t=e.show,c=e.setShow,r=e.onFinish,i=e.productsSelected,a=e.setProductsSelected;return Object(o.jsxs)(n.db,{show:t,onClose:c,size:"lg",children:[Object(o.jsx)(n.gb,{closeButton:!0,children:Object(o.jsx)(n.hb,{children:"Selecciona los productos que quieres asignar a este usuario"})}),Object(o.jsx)(n.eb,{children:Object(o.jsx)(s.a,{type:"select",productsSelected:i,setProductsSelected:a})}),Object(o.jsx)(n.fb,{children:Object(o.jsx)(n.f,{color:"success",onClick:r,children:"Aceptar"})})]})},a=function(e){var t=e.show,c=e.setShow,r=e.onFinish;return Object(o.jsxs)(n.db,{show:t,color:"danger",onClose:function(){return c(!1)},size:"sm",children:[Object(o.jsx)(n.gb,{children:Object(o.jsx)(n.hb,{style:{fontWeight:"bold",width:"100%",textAlign:"center"},children:"Estas seguro?"})}),Object(o.jsx)(n.fb,{children:Object(o.jsxs)(n.tb,{style:{width:"100%"},children:[Object(o.jsx)(n.u,{col:"6",children:Object(o.jsx)(n.f,{color:"danger",onClick:r,style:{fontWeight:"bold",width:"100%"},children:"Si"})}),Object(o.jsx)(n.u,{col:"6",children:Object(o.jsx)(n.f,{onClick:function(){return c(!1)},color:"secondary",style:{fontWeight:"bold",width:"100%"},children:"No"})})]})})]})},l=c(91),u=function(e){var t=e.onFinish,c=e.show,s=e.setShow,i=e.nameEdit,a=Object(r.useState)(i||""),u=Object(l.a)(a,2),d=u[0],b=u[1],j=Object(r.useState)(!1),h=Object(l.a)(j,2),f=h[0],O=h[1];return Object(r.useEffect)((function(){return b(i||"")}),[i]),Object(o.jsx)(n.db,{show:c,onClose:s,size:"sm",children:Object(o.jsxs)(n.J,{className:f?"was-validated":"",children:[Object(o.jsx)(n.gb,{children:Object(o.jsxs)(n.hb,{style:{fontWeight:"bold",width:"100%",textAlign:"center"},children:["".concat(i?"Editar":"Crear"," ")," Cargo"]})}),Object(o.jsxs)(n.eb,{children:[Object(o.jsx)(n.Z,{htmlFor:"name",style:{fontWeight:"bold"},children:"Nombre"}),Object(o.jsx)(n.P,{id:"name",name:"name",value:d,required:!0,onChange:function(e){var t=e.target.value;return b(t)}})]}),Object(o.jsx)(n.fb,{children:Object(o.jsxs)(n.tb,{style:{width:"100%"},children:[Object(o.jsx)(n.u,{col:"6",children:Object(o.jsx)(n.f,{color:"success",onClick:function(){if(""===d)return O(!0);t(d),O(!1)},style:{fontWeight:"bold",width:"100%"},children:"".concat(i?"Editar":"Crear")})}),Object(o.jsx)(n.u,{col:"6",children:Object(o.jsx)(n.f,{onClick:function(){return s(!1)},color:"secondary",style:{fontWeight:"bold",width:"100%"},children:"Cancelar"})})]})})]})})}},666:function(e,t,c){"use strict";c.d(t,"a",(function(){return n})),c.d(t,"b",(function(){return r}));var n=["#FF6633","#FFB399","#FF33FF","#FFFF99","#00B3E6","#E6B333","#3366E6","#999966","#99FF99","#B34D4D","#80B300","#809900","#E6B3B3","#6680B3","#66991A","#FF99E6","#CCFF1A","#FF1A66","#E6331A","#33FFCC","#66994D","#B366CC","#4D8000","#B33300","#CC80CC","#66664D","#991AFF","#E666FF","#4DB3FF","#1AB399","#E666B3","#33991A","#CC9999","#B3B31A","#00E680","#4D8066","#809980","#E6FF80","#1AFF33","#999933","#FF3380","#CCCC00","#66E64D","#4D80CC","#9900B3","#E64D66","#4DB380","#FF4D4D","#99E6E6","#6666FF"],r=function(e){switch(e){case 1:return"activo";case 2:return"de baja";case 3:return"moroso";case 4:return"en aprobacion";case 5:return"desconexion en proceso";case 6:return"activacion en proceso";default:return"indefinido"}}},757:function(e,t,c){"use strict";c.r(t);var n=c(23),r=c(91),s=c(2),o=c(646),i=c(51),a=c(652),l=c(654),u=c(664),d=c(763),b=c(651),j=c(17),h=["ID",{key:"Name",label:"nombre"},{key:"BasePrice",label:"precio"},"editar","eliminar"],f=function(e){var t=e.products,c=e.setProduct,n=e.setShowDeleteModal,r=e.loading,s=e.onPageChange,i=e.setModalVisible;return Object(j.jsx)(o.y,{items:t,fields:h,itemsPerPage:5,onPageChange:s,loading:r,pagination:!0,scopedSlots:{editar:function(e){return Object(j.jsx)(b.a,{color:"info",icon:d.a.cilPencil,onPress:function(){c(e),i(!0)}})},eliminar:function(e){return Object(j.jsx)(b.a,{color:"danger",icon:d.a.cilTrash,onPress:function(){c(e),n(!0)}})}}})},O=c(656),m=c(659),x=c(666),g={Name:"",BasePrice:null,StateID:1};t.default=function(){var e,t=Object(a.a)(["user","colors"]),c=t.user,d=t.colors,b=Object(s.useState)([]),h=Object(r.a)(b,2),p=h[0],C=h[1],P=Object(s.useState)(""),D=Object(r.a)(P,2),F=D[0],v=D[1],y=Object(s.useState)(null),I=Object(r.a)(y,2),N=I[0],w=I[1],B=Object(s.useState)(!1),S=Object(r.a)(B,2),k=S[0],E=S[1],A=Object(s.useState)(!1),W=Object(r.a)(A,2),z=W[0],q=W[1],Z=Object(s.useState)([]),L=Object(r.a)(Z,2),J=L[0],M=L[1],U=Object(s.useState)(g),K=Object(r.a)(U,2),V=K[0],G=K[1],R=Object(s.useState)(!1),T=Object(r.a)(R,2),_=T[0],$=T[1],H=Object(s.useState)(!1),Q=Object(r.a)(H,2),X=Q[0],Y=Q[1],ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Y(!0),Object(O.c)(e).then((function(e){return Promise.all(e.map((function(e){var t=e.ID,c=e.Name;return Object(O.a)(t).then((function(e){return{count:e,name:c}}))}))).then((function(t){M(t),C(e),Y(!1)}))})).catch(console.error)};return Object(s.useEffect)(ee,[]),Object(j.jsxs)(o.J,{className:z?"was-validated":"",children:[Object(j.jsx)(o.tb,{className:"align-items-center",style:{marginBottom:16},children:Object(j.jsx)(o.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-3 mb-xl-0",children:Object(j.jsx)(o.f,{onClick:function(){return E(!0)},style:{backgroundColor:d.primary,color:"#fff",fontWeight:"bold"},children:"Crear Productos"})})}),Object(j.jsxs)(o.tb,{children:[Object(j.jsx)(o.u,{xs:"12",lg:"6",children:Object(j.jsxs)(o.j,{children:[Object(j.jsx)(o.n,{style:{backgroundColor:d.primary,color:"#fff",fontWeight:"bold"},children:"Productos"}),Object(j.jsx)(o.k,{children:Object(j.jsx)(f,{products:p,setProduct:G,onPageChange:ee,setShowDeleteModal:$,setModalVisible:E,loading:X})})]})}),Object(j.jsx)(o.u,{xs:"12",lg:"6",children:Object(j.jsxs)(o.j,{children:[Object(j.jsx)(o.n,{style:{backgroundColor:d.primary,color:"#fff",fontWeight:"bold"},children:"Grafica de los Productos mas utilizados"}),J.length>0&&Object(j.jsx)(o.k,{children:Object(j.jsx)(m.b,{datasets:[{backgroundColor:x.a,data:J.map((function(e){return e.count}))}],labels:J.map((function(e){return e.name})),options:{tooltips:{enabled:!0}}})})]})})]}),Object(j.jsx)(u.b,{show:_,setShow:$,onFinish:function(){return i.supabase.from("Product").delete().match({ID:V.ID}).then((function(){Y(!1),ee(),$(!1),G(g),q(!1)}))}}),Object(j.jsxs)(o.db,{show:k,onClose:function(){G({Name:"",BasePrice:0}),E(!k)},size:"sm",children:[Object(j.jsx)(o.gb,{children:Object(j.jsx)(o.hb,{style:{fontWeight:"bold",width:"100%",textAlign:"center"},children:"".concat(V.ID?"Editar":"Crear"," Producto")})}),Object(j.jsxs)(o.eb,{children:[Object(j.jsx)(o.tb,{children:Object(j.jsx)(o.u,{xs:"12",children:Object(j.jsxs)(o.K,{children:[Object(j.jsx)(o.Z,{htmlFor:"product",style:{fontWeight:"bold"},children:"Nombre"}),Object(j.jsx)(o.P,{id:"product",placeholder:"ingresa el nombre del producto",value:V.Name,onChange:function(e){var t=e.target.value;return G(Object(n.a)(Object(n.a)({},V),{},{Name:t}))},required:!0})]})})}),Object(j.jsx)(o.tb,{children:Object(j.jsx)(o.u,{xs:"12",children:Object(j.jsxs)(o.K,{children:[Object(j.jsx)(o.Z,{htmlFor:"priceBase",style:{fontWeight:"bold"},children:"Precio Base"}),Object(j.jsx)(o.P,{id:"priceBase",value:V.BasePrice,onChange:function(e){var t=e.target.value;return G(Object(n.a)(Object(n.a)({},V),{},{BasePrice:t}))},placeholder:"$50.000",required:!0})]})})}),7===(null===c||void 0===c||null===(e=c.RolID)||void 0===e?void 0:e.ID)&&Object(j.jsx)(o.tb,{children:Object(j.jsx)(o.u,{xs:"12",children:Object(j.jsxs)(o.K,{children:[Object(j.jsx)(o.Z,{htmlFor:"priceBase",children:"Nota para el administrador"}),Object(j.jsx)(o.Gb,{id:"name",value:F,onChange:function(e){var t=e.target.value;return v(t)}})]})})})]}),Object(j.jsx)(o.fb,{children:Object(j.jsxs)(o.tb,{style:{width:"100%"},children:[Object(j.jsx)(o.u,{col:"6",children:Object(j.jsx)(o.f,{color:"success",onClick:function(){return""===V.Name||null===V.BasePrice?q(!0):7===c.RolID.ID?Object(l.c)(c.ZoneID[0].AddressID.AddressZoneID,{TypeID:V.ID?6:7,ClientID:c.ID,Note:F,Data:V,LastData:N}).then((function(){Y(!1),ee(),E(!1),v(""),w(null),G(g),q(!1)})):V.ID?i.supabase.from("Product").upsert(V).then((function(){Y(!1),ee(),E(!1),G(g),q(!1)})):(Y(!0),i.supabase.from("Product").insert(V).then((function(){Y(!1),ee(),E(!1),G(g),q(!1)})))},style:{fontWeight:"bold",width:"100%"},children:V.ID?"Editar":"Crear"})}),Object(j.jsx)(o.u,{col:"6",children:Object(j.jsx)(o.f,{color:"secondary",onClick:function(){G({Name:"",BasePrice:0}),E(!k)},style:{fontWeight:"bold",width:"100%"},children:"Cancelar"})})]})})]})]})}}}]);
//# sourceMappingURL=15.93e2f766.chunk.js.map