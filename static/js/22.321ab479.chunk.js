(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[22],{664:function(e,t,c){"use strict";c.d(t,"c",(function(){return i})),c.d(t,"b",(function(){return l})),c.d(t,"a",(function(){return b}));var n=c(646),s=c(2),o=c(662),r=c(17),i=function(e){var t=e.show,c=e.setShow,s=e.onFinish,i=e.productsSelected,l=e.setProductsSelected;return Object(r.jsxs)(n.db,{show:t,onClose:c,size:"lg",children:[Object(r.jsx)(n.gb,{closeButton:!0,children:Object(r.jsx)(n.hb,{children:"Selecciona los productos que quieres asignar a este usuario"})}),Object(r.jsx)(n.eb,{children:Object(r.jsx)(o.a,{type:"select",productsSelected:i,setProductsSelected:l})}),Object(r.jsx)(n.fb,{children:Object(r.jsx)(n.f,{color:"success",onClick:s,children:"Aceptar"})})]})},l=function(e){var t=e.show,c=e.setShow,s=e.onFinish;return Object(r.jsxs)(n.db,{show:t,color:"danger",onClose:function(){return c(!1)},size:"sm",children:[Object(r.jsx)(n.gb,{children:Object(r.jsx)(n.hb,{style:{fontWeight:"bold",width:"100%",textAlign:"center"},children:"Estas seguro?"})}),Object(r.jsx)(n.fb,{children:Object(r.jsxs)(n.tb,{style:{width:"100%"},children:[Object(r.jsx)(n.u,{col:"6",children:Object(r.jsx)(n.f,{color:"danger",onClick:s,style:{fontWeight:"bold",width:"100%"},children:"Si"})}),Object(r.jsx)(n.u,{col:"6",children:Object(r.jsx)(n.f,{onClick:function(){return c(!1)},color:"secondary",style:{fontWeight:"bold",width:"100%"},children:"No"})})]})})]})},a=c(91),b=function(e){var t=e.onFinish,c=e.show,o=e.setShow,i=e.nameEdit,l=Object(s.useState)(i||""),b=Object(a.a)(l,2),j=b[0],u=b[1],d=Object(s.useState)(!1),h=Object(a.a)(d,2),O=h[0],f=h[1];return Object(s.useEffect)((function(){return u(i||"")}),[i]),Object(r.jsx)(n.db,{show:c,onClose:o,size:"sm",children:Object(r.jsxs)(n.J,{className:O?"was-validated":"",children:[Object(r.jsx)(n.gb,{children:Object(r.jsxs)(n.hb,{style:{fontWeight:"bold",width:"100%",textAlign:"center"},children:["".concat(i?"Editar":"Crear"," ")," Cargo"]})}),Object(r.jsxs)(n.eb,{children:[Object(r.jsx)(n.Z,{htmlFor:"name",style:{fontWeight:"bold"},children:"Nombre"}),Object(r.jsx)(n.P,{id:"name",name:"name",value:j,required:!0,onChange:function(e){var t=e.target.value;return u(t)}})]}),Object(r.jsx)(n.fb,{children:Object(r.jsxs)(n.tb,{style:{width:"100%"},children:[Object(r.jsx)(n.u,{col:"6",children:Object(r.jsx)(n.f,{color:"success",onClick:function(){if(""===j)return f(!0);t(j),f(!1)},style:{fontWeight:"bold",width:"100%"},children:"".concat(i?"Editar":"Crear")})}),Object(r.jsx)(n.u,{col:"6",children:Object(r.jsx)(n.f,{onClick:function(){return o(!1)},color:"secondary",style:{fontWeight:"bold",width:"100%"},children:"Cancelar"})})]})})]})})}},666:function(e,t,c){"use strict";c.d(t,"a",(function(){return n})),c.d(t,"b",(function(){return s}));var n=["#FF6633","#FFB399","#FF33FF","#FFFF99","#00B3E6","#E6B333","#3366E6","#999966","#99FF99","#B34D4D","#80B300","#809900","#E6B3B3","#6680B3","#66991A","#FF99E6","#CCFF1A","#FF1A66","#E6331A","#33FFCC","#66994D","#B366CC","#4D8000","#B33300","#CC80CC","#66664D","#991AFF","#E666FF","#4DB3FF","#1AB399","#E666B3","#33991A","#CC9999","#B3B31A","#00E680","#4D8066","#809980","#E6FF80","#1AFF33","#999933","#FF3380","#CCCC00","#66E64D","#4D80CC","#9900B3","#E64D66","#4DB380","#FF4D4D","#99E6E6","#6666FF"],s=function(e){switch(e){case 1:return"activo";case 2:return"de baja";case 3:return"moroso";case 4:return"en aprobacion";case 5:return"desconexion en proceso";case 6:return"activacion en proceso";default:return"indefinido"}}},703:function(e,t,c){"use strict";c.r(t);var n=c(23),s=c(91),o=c(2),r=c(646),i=c(51),l=c(653),a=c.n(l),b=c(671),j=c(649),u=c(763),d=c(682),h=c(689),O=c(22),f=c(658),x=c(673),m=c(652),g=c(650),C=c(664),p=c(654),F=c(666),S=c(657),D=c(175),y=c(685),w=c(17),v=["ID","nombres","apellidos","Rut","contacto",{key:"estado"},"editar","datos",{key:"unsubscribed",label:"opciones"}];t.default=function(){var e,t=Object(O.g)(),c=Object(D.b)(),l=Object(m.a)(["user","colors"]),I=l.user,A=l.colors,k=Object(o.useState)(!1),E=Object(s.a)(k,2),B=E[0],N=E[1],z=Object(o.useState)(!1),P=Object(s.a)(z,2),W=P[0],T=P[1],q=Object(o.useState)([]),Z=Object(s.a)(q,2),R=Z[0],U=Z[1],V=Object(o.useState)([]),J=Object(s.a)(V,2),L=J[0],M=J[1],_=Object(o.useState)({}),G=Object(s.a)(_,2),H=G[0],$=G[1],K=Object(o.useState)(""),Q=Object(s.a)(K,2),X=Q[0],Y=Q[1],ee=Object(o.useState)(!1),te=Object(s.a)(ee,2),ce=te[0],ne=te[1],se=Object(o.useState)(!1),oe=Object(s.a)(se,2),re=oe[0],ie=oe[1],le=Object(o.useState)(!1),ae=Object(s.a)(le,2),be=ae[0],je=ae[1],ue=Object(o.useState)(1),de=Object(s.a)(ue,2),he=de[0],Oe=de[1],fe=Object(o.useState)([]),xe=Object(s.a)(fe,2),me=xe[0],ge=xe[1],Ce=Object(o.useState)(!1),pe=Object(s.a)(Ce,2),Fe=pe[0],Se=pe[1],De=Object(o.useState)(),ye=Object(s.a)(De,2),we=ye[0],ve=ye[1],Ie=Object(o.useState)(!1),Ae=Object(s.a)(Ie,2),ke=Ae[0],Ee=Ae[1],Be=Object(o.useState)(!1),Ne=Object(s.a)(Be,2),ze=Ne[0],Pe=Ne[1],We=Object(o.useState)(!1),Te=Object(s.a)(We,2),qe=Te[0],Ze=Te[1],Re=Object(o.useState)(),Ue=Object(s.a)(Re,2),Ve=Ue[0],Je=Ue[1],Le=function(e,t){if(Y(/^[0-9]*$/.test(e)?Object(x.format)(e).replace(/\./g,""):e),void 0===e||""===e)return Me();ne(!0),Object(g.k)(e,t).then((function(e){M(e.filter((function(e){return"4"!==e.StateID})).map((function(e){return Object(n.a)(Object(n.a)({},e),{},{nombres:e.Names,apellidos:e.LastName,contacto:e.PhoneNumber})}))),ne(!1)}))},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;ne(!0);var c=i.supabase.from("User").select("*,Address!inner(*)").eq("RolID",2).limit(5*e+1);"0"!==he&&c.eq("StateID",he),t&&c.eq("Address.AddressName",t),c.then((function(e){M(e.data.filter((function(e){return"4"!==e.StateID})).map((function(e){return Object(n.a)(Object(n.a)({},e),{},{nombres:e.Names,apellidos:e.LastName,contacto:e.PhoneNumber,estado:Ge(e.StateID)})}))),ne(!1)})).catch(console.error)},_e=function(e){switch(e){case"1":return"success";case"2":return"danger";case"3":return"info";case"5":return"danger";case"6":return"info";default:return"default"}},Ge=function(e){switch(e){case"1":return"Activado";case"2":return"De Baja";case"3":return"Moroso";case"5":return"Proceso de baja";case"6":return"Reconexion";default:return"Indefinido"}},He=Object(o.useCallback)(a.a.debounce(Le,1e3),[]),$e=Object(o.useCallback)(a.a.debounce((function(e){Ze(!1),Object(S.b)(e).then((function(e){ge(a.a.uniq(e.map((function(e){return e.Address.AddressName}))).map((function(e){return{value:e,label:e}}))),Ze(!1)}))}),1e3),[]);return Object(o.useEffect)(Me,[he]),Object(o.useEffect)((function(){Object(g.l)().then(U)}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(r.tb,{children:Object(w.jsxs)(r.u,{xs:"12",lg:"12",children:[B?Object(w.jsx)(r.f,{color:"primary",style:{marginBottom:10,backgroundColor:A.primary},onClick:function(){$({}),N(!1)},children:Object(w.jsx)(j.a,{color:"white",name:"cil-arrow-left",size:"lg",height:20})}):Object(w.jsxs)(r.tb,{children:[Object(w.jsx)(r.u,{children:Object(w.jsx)(r.f,{onClick:function(){return N(!0)},style:{marginBottom:10,backgroundColor:A.primary,color:"#fff",fontSize:16,fontWeight:"bold"},children:"Crear Usuario"})}),8===(null===I||void 0===I||null===(e=I.RolID)||void 0===e?void 0:e.ID)&&Object(w.jsx)(r.u,{children:Object(w.jsx)(r.f,{onClick:function(){return T(!0)},style:{marginBottom:10},size:"md",color:"success",children:"Crear Cobro automatico"})})]}),Object(w.jsx)("div",{style:{display:B?"none":"block"},children:Object(w.jsxs)(r.j,{style:{borderRadius:20},children:[Object(w.jsx)(r.n,{style:{backgroundColor:A.primary,color:"#fff",fontSize:16,fontWeight:"bold",textAlign:"center"},children:"Usuarios"}),Object(w.jsxs)(r.k,{children:[Object(w.jsxs)(r.tb,{alignHorizontal:"end",children:[Object(w.jsxs)(r.u,{xs:"12",lg:"2",children:[Object(w.jsx)(r.Z,{style:{fontWeight:"bold"},children:"Filtrar por estado:"}),Object(w.jsxs)(r.ub,{custom:!0,name:"select-user-states",id:"select-user-states",value:he,onChange:function(e){var t=e.target.value;Oe(t)},children:[Object(w.jsx)("option",{value:0,children:"Todos"}),R.map((function(e){return Object(w.jsx)("option",{value:e.ID,children:Object(F.b)(e.ID)})}))]})]}),Object(w.jsxs)(r.u,{xs:"12",lg:"2",children:[Object(w.jsx)(r.Z,{style:{fontWeight:"bold"},children:"Filtrar por direcci\xf3n:"}),Object(w.jsx)(b.a,{className:"basic-single",classNamePrefix:"select",onInputChange:$e,onChange:function(e){Je(null===e||void 0===e?void 0:e.value),Me(1,null===e||void 0===e?void 0:e.value)},isLoading:qe,isClearable:!0,isSearchable:!0,name:"color",options:me})]})]}),Object(w.jsx)(r.y,{items:L,fields:v,sorter:!0,onPageChange:function(e){return""!==Ve?Me(e,Ve):""!==!X?Me(e):Le(X,e)},loading:ce,pagination:!0,tableFilter:{placeholder:"Nombre, Rut o Apellido",label:"Filtrar"},itemsPerPage:5,selectable:!0,onTableFilterChange:He,scopedSlots:{editar:function(e){return Object(w.jsx)("td",{children:Object(w.jsx)(r.tb,{children:Object(w.jsx)(r.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-2 mb-xl-0",style:{zIndex:999},children:Object(w.jsx)(r.f,{color:"info",onClick:function(){N(!0),$(e)},children:Object(w.jsx)(j.a,{content:u.a.cilPencil,size:"l"})})})})})},datos:function(e){return Object(w.jsx)("td",{children:Object(w.jsx)(r.tb,{children:Object(w.jsx)(r.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-2 mb-xl-0",style:{zIndex:999},children:Object(w.jsx)(r.f,{color:"secondary",onClick:function(){return t.push("/menu/user/".concat(e.ID))},children:Object(w.jsx)(j.a,{content:u.a.cilUser,size:"l"})})})})})},unsubscribed:function(e){return Object(w.jsxs)("td",{children:["3"===e.StateID&&Object(w.jsx)(r.tb,{children:Object(w.jsx)(r.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-2 mb-xl-0",children:Object(w.jsx)(r.f,{color:"danger",onClick:function(){ve(e.ID),Se(!0)},children:Object(w.jsx)(j.a,{content:u.a.cilArrowBottom,size:"l"})})})}),"5"===e.StateID&&Object(w.jsx)(r.tb,{children:Object(w.jsx)(r.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-2 mb-xl-0",children:Object(w.jsx)(r.f,{color:"success",onClick:function(){ve(e.ID),Ee(!0)},children:Object(w.jsx)(j.a,{content:u.a.cilArrowTop,size:"l"})})})}),"2"===e.StateID&&Object(w.jsx)(r.tb,{children:Object(w.jsx)(r.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-2 mb-xl-0",children:Object(w.jsx)(r.f,{color:"success",onClick:function(){ve(e.ID),Pe(!0)},children:Object(w.jsx)(j.a,{content:u.a.cilArrowTop,size:"l"})})})})]})},estado:function(e){return Object(w.jsx)("td",{children:Object(w.jsx)(r.b,{color:_e(e.StateID),children:Ge(e.StateID)})})}}})]})]})}),Object(w.jsx)("div",{style:{display:B?"block":"none"},children:Object(w.jsx)(y.default,{user:H,onClose:function(){$({}),Me(),N(!1)}})})]})}),!B&&re&&Object(w.jsx)(d.a,{isVisible:re,setModalVisible:ie,userID:H.ID}),!B&&be&&Object(w.jsx)(h.a,{isVisible:be,setModalVisible:je,userID:H.ID}),Object(w.jsxs)(r.db,{show:W,onClose:T,size:"sm",color:"info",children:[Object(w.jsx)(r.gb,{style:{justifyContent:"center"},children:Object(w.jsx)(r.hb,{style:{textAlign:"center"},children:"Estas seguro?"})}),Object(w.jsxs)(r.fb,{style:{justifyContent:"center"},children:[Object(w.jsx)(r.f,{color:"success",onClick:function(){return Object(f.a)().then((function(){c({type:"SET_TOAS",payload:{show:!0,type:"success",label:"Cobro Generado"}}),setTimeout((function(){c({type:"SET_TOAS",payload:{show:!1,type:"",label:""}})}),3e3),T(!1)}))},children:"Aceptar"}),Object(w.jsx)(r.f,{color:"danger",onClick:function(){return T(!1)},children:"Cancelar"})]})]}),Object(w.jsx)(C.b,{show:Fe,setShow:function(){ve({}),Se(!1)},onFinish:function(){Object(g.o)(we,I.ZoneID[0].AddressID.AddressZoneID).then((function(){ve({}),Se(!1),Me()}))}}),Object(w.jsx)(C.b,{show:ke,setShow:function(){ve({}),Ee(!1)},onFinish:function(){return Object(g.r)({ID:we,StateID:1}).then((function(){Object(p.e)(we),ve({}),Ee(!1),Me()}))}}),Object(w.jsx)(C.b,{show:ze,setShow:function(){ve({}),Pe(!1)},onFinish:function(){return Object(g.n)(we,I.ZoneID[0].AddressID.AddressZoneID).then((function(){ve({}),Pe(!1),Me()}))}})]})}}}]);
//# sourceMappingURL=22.321ab479.chunk.js.map