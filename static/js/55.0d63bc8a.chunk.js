(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[55],{755:function(e,c,t){"use strict";t.r(c);var n=t(23),a=t(91),r=t(649),s=t(646),i=t(2),l=t(763),o=t(51),j=t(51).supabase,b=t(17),u=["ID","nombre","editar","eliminar"];c.default=function(){var e=Object(i.useState)(!1),c=Object(a.a)(e,2),t=c[0],d=c[1],m=Object(i.useState)(!1),O=Object(a.a)(m,2),h=O[0],f=O[1],x=Object(i.useState)({}),p=Object(a.a)(x,2),g=p[0],N=p[1],C=Object(i.useState)([]),v=Object(a.a)(C,2),S=v[0],k=v[1],y=Object(i.useState)(!1),D=Object(a.a)(y,2),I=D[0],R=D[1],P=Object(i.useState)(""),w=Object(a.a)(P,2),E=w[0],z=w[1],J=Object(i.useState)(!1),T=Object(a.a)(J,2),q=T[0],B=T[1],F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;d(!0),o.supabase.from("Rol").select("*").limit(5*e+1).then((function(e){k(e.data.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{nombre:e.Name})}))),d(!1)})).catch(console.error)},Z=function(){return(e={Name:E},j.from("Rol").insert(e).then((function(e){return e.data[0].ID}))).then((function(){z(""),F(),B(!1)}));var e},A=function(){return(e=g.ID,c={Name:E},j.from("Rol").update(c).eq("ID",e)).then((function(){z(""),N({}),F(),B(!1),R(!1)}));var e,c};return Object(i.useEffect)(F,[]),Object(b.jsxs)(s.J,{className:q?"was-validated":"",children:[Object(b.jsx)(s.tb,{children:Object(b.jsx)(s.u,{xs:"12",lg:"12",children:Object(b.jsxs)(s.j,{children:[Object(b.jsx)(s.n,{children:"Roles "}),Object(b.jsxs)(s.k,{children:[Object(b.jsxs)(s.tb,{style:{marginBottom:18},children:[Object(b.jsxs)(s.u,{col:"2",children:[Object(b.jsx)(s.Z,{htmlFor:"name",children:"Nombre"}),Object(b.jsx)(s.P,{id:"name",name:"name",value:E,required:!0,onChange:function(e){var c=e.target.value;return z(c)}})]}),Object(b.jsx)(s.u,{col:"2",style:{paddingTop:30},children:Object(b.jsx)(s.f,{color:I?"primary":"success",onClick:function(){return""===E?B(!0):I?A():Z()},children:"".concat(I?"Editar":"Crear"," Rol")})}),I&&Object(b.jsx)(s.u,{col:"2",style:{paddingTop:30},children:Object(b.jsx)(s.f,{color:"danger",onClick:function(){R(!1),N({}),z("")},children:"Cancelar Edicion"})})]}),Object(b.jsx)(s.y,{items:S,fields:u,itemsPerPage:5,onPageChange:F,loading:t,pagination:!0,scopedSlots:{editar:function(e){return Object(b.jsx)("td",{className:"py-2",children:Object(b.jsx)(s.tb,{className:"align-items-center",children:Object(b.jsx)(s.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-2 mb-xl-0",children:Object(b.jsx)(s.f,{color:"info",onClick:function(){N(e),z(e.Name),R(!0)},children:Object(b.jsx)(r.a,{content:l.a.cilPencil,size:"xl"})})})})})},eliminar:function(e){return Object(b.jsx)("td",{className:"py-2",children:Object(b.jsx)(s.tb,{className:"align-items-center",children:Object(b.jsx)(s.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-2 mb-xl-0",children:Object(b.jsx)(s.f,{color:"danger",onClick:function(){f(!0),N(e)},children:Object(b.jsx)(r.a,{content:l.a.cilTrash,size:"xl"})})})})})}}})]})]})})}),Object(b.jsxs)(s.db,{show:h,color:"danger",onClose:function(){N(),f(!h)},size:"sm",children:[Object(b.jsx)(s.gb,{closeButton:!0,children:Object(b.jsx)(s.hb,{children:"Eliminar Sucursal"})}),Object(b.jsxs)(s.fb,{children:[Object(b.jsx)(s.f,{color:"danger",onClick:function(){return o.supabase.from("Rol").delete().match({ID:g.ID}).then((function(){d(!1),N(),F(),f(!1),B(!1)}))},children:"Si"}),Object(b.jsx)(s.f,{onClick:function(){N(),f(!h)},color:"secondary",children:"No"})]})]})]})}}}]);
//# sourceMappingURL=55.0d63bc8a.chunk.js.map