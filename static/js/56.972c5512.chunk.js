(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[56],{720:function(e,c,t){"use strict";t.r(c);var n=t(23),a=t(91),r=t(649),i=t(646),s=t(2),l=t(763),o=t(51),j=t(657),b=t(653),u=t.n(b),d=t(17),O=["ID","nombre","editar","eliminar"];c.default=function(){var e=Object(s.useState)(!1),c=Object(a.a)(e,2),t=c[0],b=c[1],m=Object(s.useState)(!1),h=Object(a.a)(m,2),f=h[0],x=h[1],p=Object(s.useState)({}),g=Object(a.a)(p,2),N=g[0],C=g[1],k=Object(s.useState)([]),S=Object(a.a)(k,2),v=S[0],y=S[1],Z=Object(s.useState)(!1),P=Object(a.a)(Z,2),w=P[0],D=P[1],E=Object(s.useState)(""),F=Object(a.a)(E,2),I=F[0],T=F[1],z=Object(s.useState)(!1),J=Object(a.a)(z,2),B=J[0],q=J[1],A=Object(s.useState)(""),G=Object(a.a)(A,2),H=G[0],K=G[1],L=function(e,c){if(K(e),void 0===e||""===e)return M();b(!0),o.supabase.from("Zones").select("*").or("Name.ilike.%".concat(e,"%")).limit(5*c+1).then((function(e){y(e.data.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{nombre:e.Name})}))),b(!1)})).catch(console.error)},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;b(!0),o.supabase.from("Zones").select("*").limit(5*e+1).then((function(e){y(e.data.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{nombre:e.Name})}))),b(!1)})).catch(console.error)};Object(s.useEffect)(M,[]);var Q=Object(s.useCallback)(u.a.debounce(L,1e3),[]);return Object(d.jsxs)(i.J,{className:B?"was-validated":"",children:[Object(d.jsx)(i.tb,{children:Object(d.jsx)(i.u,{xs:"12",lg:"12",children:Object(d.jsxs)(i.j,{children:[Object(d.jsx)(i.n,{children:"Zonas"}),Object(d.jsxs)(i.k,{children:[Object(d.jsxs)(i.tb,{style:{marginBottom:18},children:[Object(d.jsxs)(i.u,{col:"2",children:[Object(d.jsx)(i.Z,{htmlFor:"name",children:"Nombre"}),Object(d.jsx)(i.P,{id:"name",name:"name",value:I,required:!0,onChange:function(e){var c=e.target.value;return T(c)}})]}),Object(d.jsx)(i.u,{col:"2",style:{paddingTop:30},children:Object(d.jsx)(i.f,{color:w?"primary":"success",onClick:function(){return""===I?q(!0):w?Object(j.f)(N.ID,{Name:I}).then((function(){T(""),C({}),M(),D(!1),q(!1)})):Object(j.a)({Name:I}).then((function(){T(""),M()}))},children:"".concat(w?"Editar":"Crear"," Zona")})}),w&&Object(d.jsx)(i.u,{col:"2",style:{paddingTop:30},children:Object(d.jsx)(i.f,{color:"danger",onClick:function(){D(!1),C({}),T("")},children:"Cancelar Edicion"})})]}),Object(d.jsx)(i.y,{items:v,fields:O,itemsPerPage:5,loading:t,tableFilter:{placeholder:"Nombre",label:"Filtrar"},onPageChange:function(e){return""!==!H?M(e):L(H,e)},onTableFilterChange:Q,pagination:!0,scopedSlots:{editar:function(e){return Object(d.jsx)("td",{className:"py-2",children:Object(d.jsx)(i.tb,{className:"align-items-center",children:Object(d.jsx)(i.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-2 mb-xl-0",children:Object(d.jsx)(i.f,{color:"info",onClick:function(){C(e),T(e.Name),D(!0)},children:Object(d.jsx)(r.a,{content:l.a.cilPencil,size:"xl"})})})})})},eliminar:function(e){return Object(d.jsx)("td",{className:"py-2",children:Object(d.jsx)(i.tb,{className:"align-items-center",children:Object(d.jsx)(i.u,{col:"2",xs:"2",sm:"2",md:"2",className:"mb-2 mb-xl-0",children:Object(d.jsx)(i.f,{color:"danger",onClick:function(){x(!0),C(e)},children:Object(d.jsx)(r.a,{content:l.a.cilTrash,size:"xl"})})})})})}}})]})]})})}),Object(d.jsxs)(i.db,{show:f,color:"danger",onClose:function(){C(),x(!f)},size:"sm",children:[Object(d.jsx)(i.gb,{closeButton:!0,children:Object(d.jsx)(i.hb,{children:"Eliminar Sucursal"})}),Object(d.jsxs)(i.fb,{children:[Object(d.jsx)(i.f,{color:"danger",onClick:function(){return o.supabase.from("Zones").delete().match({ID:N.ID}).then((function(){b(!1),C(),M(),x(!1),q(!1)}))},children:"Si"}),Object(d.jsx)(i.f,{onClick:function(){C(),x(!f)},color:"secondary",children:"No"})]})]})]})}}}]);
//# sourceMappingURL=56.972c5512.chunk.js.map